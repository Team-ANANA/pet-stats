name: Docker Image CI

on:
  push:
    branches: [ "main" ]
  pull_request:
    branches: [ "main" ]

jobs:

  build:

    runs-on: ubuntu-latest

    steps:
    - name: Checkout
      uses: actions/checkout@v3
      with:
        path: main

    - name: Checkout tools repo
      uses: actions/checkout@v3
      with:
        repository: Team-ANANA/docker-images
        path: my-tools

    - name: Build the Docker image
      run: |
        ls
        pwd
        docker build ./main --tag test-image
        docker save -o ./my-tools/test-image.tar test-image 

    - name: GitHub Push
      # You may pin to the exact commit or the version.
      # uses: ad-m/github-push-action@40bf560936a8022e68a3c00e7d2abefaf01305a6
      uses: ad-m/github-push-action@v0.6.0
      with:
        github_token: $\{{ secrets.GITHUB_TOKEN }}
        # Destination repisitory to push changes
        repository: Team-ANANA/docker-images
        directory: ./my-tools
